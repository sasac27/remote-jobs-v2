<!--dashboard.html-->
{% extends "base.html" %}
{% block title %}Dashboard | Remote Job Board{% endblock %}

{% block content %}
<h1 class="text-xl font-bold">ðŸ“Š Job Analytics</h1>
<p>Total Jobs Scraped: {{ total_jobs }}</p>

<h2 class="mt-4 font-semibold">Top Categories:</h2>
<ul>
    {% for cat, count in top_categories %}
        <li>{{ cat }} - {{ count }}</li>
    {% endfor %}
</ul>

<h2 class="mt-4 font-semibold">Top Locations:</h2>
<ul>
    {% for loc, count in top_locations %}
        <li>{{ loc }} - {{ count }}</li>
    {% endfor %}
</ul>

<h2 class="text-lg font-bold mt-10 mb-2">ðŸ’µ Salary Distribution</h2>
{% set max_count = salary_distribution.values() | max %}
<ul class="space-y-3">
  {% for label, count in salary_distribution.items() %}
    <li class="flex items-center space-x-4">
      <span class="w-28 font-medium">{{ label }}</span>
      <div class="flex-1 bg-gray-200 rounded h-4 relative">
        <div class="bg-blue-600 h-4 rounded"
             style="width: {{ (count / max_count * 100) | round(1) }}%">
        </div>
      </div>
      <span class="ml-2 text-sm text-gray-700">{{ count }}</span>
    </li>
  {% endfor %}
</ul>

<!-- âœ… Show salary coverage -->
<p class="mt-4 text-sm text-gray-600">
  {{ salaries | length }} jobs with salary info / {{ total_jobs }} total jobs
  ({{ (salaries | length / total_jobs * 100) | round(1) }}%)
</p>

<h2 class="text-lg font-bold mt-10 mb-2">ðŸ“† Jobs Posted Over Time</h2>
<canvas id="trendChart" height="100"></canvas>


{% endblock %}
